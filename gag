--// CONFIG
local DIAMOND_LIMIT = 1000 -- số diamonds cần để đổi acc

--// SERVICES
local Players = game:GetService("Players")
local player = Players.LocalPlayer

--// Hàm đổi acc
local function changeAccount()
    -- ghi log ra file
    pcall(function()
        writefile(player.Name .. "_Done.txt", "Completed - Enough Diamonds")
    end)

    -- kick acc hiện tại
    player:Kick("Enough Diamonds! Switching account...")
end

--// Cách 1: Dùng sự kiện AttributeChanged (nhẹ, realtime)
player.AttributeChanged:Connect(function(attr)
    if attr == "Diamonds" then
        local diamonds = player:GetAttribute("Diamonds") or 0
        print("[Diamonds Update]:", diamonds)
        if diamonds >= DIAMOND_LIMIT then
            changeAccount()
        end
    end
end)

--// Cách 2: Vòng lặp check định kỳ (backup, chắc ăn)
task.spawn(function()
    while task.wait(5) do
        local diamonds = player:GetAttribute("Diamonds") or 0
        print("[Diamonds Loop]:", diamonds)
        if diamonds >= DIAMOND_LIMIT then
            changeAccount()
            break
        end
    end
end)
